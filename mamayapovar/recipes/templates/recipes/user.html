{% extends "base.html" %}

{% load static %}
{% block post %}
<main class="user">
	<!-- Профиль самого участника -->
	<!-- <div class="user-info">
			<div class="user-info__inner">
				<div class="user-avatar  user-avatar--change  user-info__avatar">
					<label style="background-image: url('img/placeholder-avatar.jpg');" class="input  input--photo  user-avatar__input" title="Изменить фото профиля">
						<input type="file" name="photo" accept=".jpg, .jpeg, .png" required>
						<div class="user-avatar__placeholder">
							<svg class="icon  user-avatar__icon" aria-hidden="true" focusable="false">
								<use href="{% static 'recipes/img/sprite.svg' %}#image"/>
							</svg>
						</div>
					</label>
				</div>
				<h1 class="section-h1  user-info__name">Екатерина Георгадзе</h1>
				<p class="user-info__desc">Готовлю самые вкусные и пышные оладушки</p>
				<a href="settings-profile.html" class="section-link  user-info__link">Изменить описание</a>
			</div>
			<div class="user-info-stats  user-info__stats">
				<dl class="user-info-stats__item">
					<dt class="user-info-stats__name">Подписчиков</dt>
					<dd class="user-info-stats__amount">32</dd>
				</dl>
				<dl class="user-info-stats__item">
					<dt class="user-info-stats__name">Постов</dt>
					<dd class="user-info-stats__amount">3</dd>
				</dl>
				<dl class="user-info-stats__item">
					<dt class="user-info-stats__name">Лайков</dt>
					<dd class="user-info-stats__amount">5341</dd>
				</dl>
			</div>
			<a href="settings-profile.html" class="btn  btn--second  btn--icon  btn--small user-info__btn" aria-label="Перейти в настройки">
				<svg class="icon" aria-hidden="true" focusable="false">
					<use href="{% static 'recipes/img/sprite.svg' %}#settings"/>
				</svg>
			</a>
		</div> -->

	<!-- Гость -->
	<!-- <div class="user-info">
			<div class="user-info__inner">
				<img src="img/placeholder-avatar.jpg" class="user-avatar  user-info__avatar" width="120" height="120" alt="Фото профиля">
				<h1 class="section-h1  user-info__name">Екатерина Георгадзе</h1>
				<p class="user-info__desc">Готовлю самые вкусные и пышные оладушки</p>
			</div>
			<div class="user-info-stats  user-info__stats">
				<dl class="user-info-stats__item">
					<dt class="user-info-stats__name">Подписчиков</dt>
					<dd class="user-info-stats__amount">32</dd>
				</dl>
				<dl class="user-info-stats__item">
					<dt class="user-info-stats__name">Постов</dt>
					<dd class="user-info-stats__amount">3</dd>
				</dl>
				<dl class="user-info-stats__item">
					<dt class="user-info-stats__name">Лайков</dt>
					<dd class="user-info-stats__amount">5341</dd>
				</dl>
			</div>
			<button class="btn  btn--second  btn--small  btn--left  user-info__btn" data-graph-path="register" data-graph-speed="0">
				Подписаться
				<svg class="icon  btn__icon" aria-hidden="true" focusable="false">
					<use href="{% static 'recipes/img/sprite.svg' %}#user-plus"/>
				</svg>
			</button>
		</div> -->

	<!-- Авторизованный -->
	<div class="user-info">
		<div class="user-info__inner">
			{% if user.avatar.url  %}
				<img src="{{ user.avatar.url }}" class="user-avatar  user-info__avatar" width="120" height="120"
					alt="Фото профиля">
			{% else %}
				<img src="{% static 'recipes/img/placeholder-avatar.jpg' %}" class="user-avatar  user-info__avatar" width="120" height="120"
					alt="Фото профиля">
			{% endif %}
			<h1 class="section-h1  user-info__name">{{ user.username }}</h1>
			<p class="user-info__desc">{{ user.description }}</p>
		</div>
		<div class="user-info-stats  user-info__stats">
			<dl class="user-info-stats__item">
				<dt class="user-info-stats__name">Подписчиков</dt>
				<dd class="user-info-stats__amount">32</dd>
			</dl>
			<dl class="user-info-stats__item">
				<dt class="user-info-stats__name">Постов</dt>
				<dd class="user-info-stats__amount">{{ posts }}</dd>
			</dl>
			<dl class="user-info-stats__item">
				<dt class="user-info-stats__name">Лайков</dt>
				<dd class="user-info-stats__amount">5341</dd>
			</dl>
		</div>
		<button class="btn  btn--second  btn--small  btn--left btn--subscribe  user-info__btn"
			aria-label="Оформить подписку" data-button-subscribe>
			<span data-text-subscribe>Подписаться</span>
			<svg class="icon  btn__icon" aria-hidden="true" focusable="false">
				<use href="{% static 'recipes/img/sprite.svg' %}#user-plus" />
			</svg>
		</button>
	</div>
	<div class="feed  user-feed">
		{% for recipe in recipes %}
			<article class="feed-item">
				<div class="content-header  feed-item__header">
					<div class="content-info">
						<a href="#" class="content-info__category">
							<img src="{% get_static_prefix %}recipes/img/category/{{ recipe.cat.id }}.svg" width="24" height="24" alt="" loading="lazy">
							<span>{{ recipe.cat }}</span>
						</a>
						<a href="user/{{ recipe.author_id.id }}/" class="content-info__author">{{ recipe.author_id }}</a>
						<time class="content-info__date" datetime="2022-12-02 16:00">{{ recipe.time_create }}</time>
					</div>
					<a href="recipe/{{ recipe.id }}">
						<h2 class="section-h1  content-header__title">{{ recipe.title }}</h2>
						<p class="content-header__desc">{{ recipe.description }}</p>
					</a>
					<div class="content-short">
						<div class="content-short-dropdown">
							<button class="btn-reset  content-short-dropdown__toggle" aria-label="Открыть меню профиля" aria-expanded="false" data-short-ingredients-toggle>
								{{ recipe.get_beautiful_ingredients }}
								<svg class="icon  icon--16  content-short__icon" aria-hidden="true" focusable="false">
									<use href="{% static 'recipes/img/sprite.svg' %}#chevron-down"/>
								</svg>
							</button>
							<div class="content-short-dropdown__menu  short-ingredients"  data-short-ingredients>
								{% for text, nums in recipe.ingredients %}
									<dl class="short-ingredients__item">
										<dt class="short-ingredients__name">
											<span>{{ text }}</span>
										</dt>
										<dd class="short-ingredients__details">{{ nums }}</dd>
									</dl>
								{% endfor %}
							</div>
						</div>
						<ul class="list-reset content-short__list">
							<li class="content-short__item">
								<svg class="icon  icon--16  content-short__icon" aria-hidden="true" focusable="false">
									<use href="{% static 'recipes/img/sprite.svg' %}#users"/>
								</svg>
								{{ recipe.persons }}
							</li>
							<li class="content-short__item">
								<svg class="icon  icon--16  content-short__icon" aria-hidden="true" focusable="false">
									<use href="{% static 'recipes/img/sprite.svg' %}#stopwatch"/>
								</svg>
								{{ recipe.cooking_time }}
							</li>
						</ul>
					</div>
				</div>
				<a href="recipe/{{ recipe.id }}" class="feed-item__img">
					{% if recipe.photo %}
						<img src="{{ recipe.photo.url }}" width="676" height="350"
							 alt="{{ recipe.title }}" loading="lazy">
					{% else %}
						<img src="{% static 'recipes/img/placeholder-image.jpg' %}" width="676" height="350"
							 alt="{{ recipe.title }}" loading="lazy">
					{% endif %}
				</a>
				<div class="content-footer  feed-item__footer">
					<div class="content-footer__left">
						<button class="btn-reset  content-footer__btn  content-footer__btn--like" aria-label="Поставить отметку 'Нравится'" data-button-like>
							<svg class="icon  content-footer__icon" aria-hidden="true" focusable="false">
								<use href="{% static 'recipes/img/sprite.svg' %}#heart"/>
							</svg>
							<span>842</span>
						</button>
						<a href="recipe/{{ recipe.id }}#comments" class="btn-reset  content-footer__btn  content-footer__btn--comment" aria-label="Перейти к комментариям">
							<svg class="icon  content-footer__icon" aria-hidden="true" focusable="false">
								<use href="{% static 'recipes/img/sprite.svg' %}#circle"/>
							</svg>
							<span>11</span>
						</a>
					</div>
					<div class="btn-reset  content-footer__btn content-footer__btn--bookmark"
						data-id="{{ recipe.id }}" data-type="recipe" data-action="bookmark" data-url_root="{% url 'bookmark_post' recipe.id %}"
						aria-label="Добавить в закладки" data-button-bookmark>
						<svg class="icon  content-footer__icon" aria-hidden="true" focusable="false">
							<use href="{% static 'recipes/img/sprite.svg' %}#bookmark"/>
						</svg>
					</div>
				</div>
			</article>
		{% endfor %}
	</div>
</main>
{% endblock %}
