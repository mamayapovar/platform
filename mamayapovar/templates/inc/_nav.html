{% load static recipes_extra %}

{% block navbar %}

{% if request.user.is_authenticated %}
<header class="header">
    <div class="container">
      <div class="header__inner">
        <div class="header__left">
          <a href="/" class="header__logo" title="Вернуться на главную страницу">
            <img src="{% static 'recipes/img/logo.svg' %}" width="100" height="37" alt="">
          </a>
          <form action="#" class="header__search">
            <input type="email" name="search" class="input  header__input" placeholder="Поиск" disabled>
          </form>
        </div>
        <div class="header__right">
          <a href="{% url 'new_recipe' %}" class="btn  btn--left" aria-label="Создать новый рецепт">
            Создать
            <svg class="icon " aria-hidden="true" focusable="false">
              <use href="{% static 'recipes/img/sprite.svg' %}#plus" />
            </svg>
          </a>
          <div class="header-profile">
              {% is_avatar request.user.id as has %}
              {% if has %}
                <a href="{% url 'user_profile' request.user.id %}" class="header-profile__avatar"  aria-label="Перейти в профиль">
                  <img src="{% get_avatar_url request.user.id %}" width="56" height="56" alt="Фото профиля">
                </a>
              {% else %}
                <a href="{% url 'user_profile' request.user.id %}" class="header-profile__avatar"  aria-label="Перейти в профиль">
                  <img src="{% static 'recipes/img/placeholder-avatar.jpg' %}" width="56" height="56" alt="Фото профиля">
                </a>
              {% endif %}
            <button class="btn-reset  header-profile__toggle" aria-label="Открыть меню профиля" aria-expanded="false"
              data-menu-profile-toggle>
              <svg class="icon" aria-hidden="true" focusable="false">
                <use href="{% static 'recipes/img/sprite.svg' %}#chevron-down" />
              </svg>
            </button>
            <ul class="list-reset  header-profile-menu" data-menu-profile>
              <li class="header-profile-menu__item">
                <span class="header-profile-menu__label">Мой профиль</span>
                <a href="{% url 'user_profile' request.user.id %}" class="header-profile-menu__link" data-menu-profile-link>
                    {% if has %}
                        <img src="{% get_avatar_url request.user.id %}" class="header-profile-menu__avatar" width="48" height="48"
                    alt="Фото профиля">
                    {% else %}
                        <img src="{% static 'recipes/img/placeholder-avatar.jpg' %}" class="header-profile-menu__avatar" width="48" height="48 "
                    alt="Фото профиля">
                    {% endif %}
                  <span>{{ request.user.username }}</span>
                </a>
              </li>
              <li class="header-profile-menu__item">
                <a href="settings-profile.html" class="header-profile-menu__link" data-menu-profile-link>
                  <svg class="icon" aria-hidden="true" focusable="false">
                    <use href="{% static 'recipes/img/sprite.svg' %}#settings" />
                  </svg>
                  <span>Настройки</span>
                </a>
              </li>
              <li class="header-profile-menu__item">
                <a href="{% url 'logout' %}" class="header-profile-menu__link" data-menu-profile-link>
                  <svg class="icon" aria-hidden="true" focusable="false">
                    <use href="{% static 'recipes/img/sprite.svg' %}#log-out" />
                  </svg>
                  <span>Выход</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
</header>

{% else %}
<header class="header">
    <div class="container">
        <div class="header__inner">
            <div class="header__left">
                <a href="/" class="header__logo" title="Вернуться на главную страницу">
                    <img src="{% static 'recipes/img/logo.svg' %}" width="100" height="37" alt="">
                </a>
                <form id="search-form" action="#" class="header__search">
                    <input type="email" name="search" class="input header__input" placeholder="Поиск" disabled>
                </form>
            </div>
            <div class="header__right">
                <button class="btn  btn--left" data-graph-path="register" data-graph-speed="100" aria-label="Создать новый рецепт">
                    Создать
                    <svg class="icon" aria-hidden="true" focusable="false">
                        <use href="{% static 'recipes/img/sprite.svg' %}#plus"/>
                    </svg>
                </button>
                <button class="btn  btn--third  btn--left" data-graph-path="register" data-graph-speed="100" aria-label="Войти или зарегистрироваться">
                    Войти
                    <svg class="icon" aria-hidden="true" focusable="false">
                        <use href="{% static 'recipes/img/sprite.svg' %}#user"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</header>

{% endif %}

{% endblock %}

